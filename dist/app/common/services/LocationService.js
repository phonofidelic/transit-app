"use-strict";angular.module("transitApp").factory("LocationService",["$http",function(o){function e(){}var t=new google.maps.Geocoder;return e.prototype.getCurrentPosition=function(o,e,t){return new Promise(function(o,e){navigator.geolocation.getCurrentPosition(o,e,t)})},e.prototype.getStaticPosition=function(){return o.get("assets/mockData/staticCoordsVancouver.json").then(function(o){return console.log("position##",o),o.data})},e.prototype.geocode=function(e){return new Promise(function(t,n){var r="AIzaSyAJa-YCzQ7t6AhlXCj7c-9p1b0QdlWZWG8";return o({method:"GET",url:"https://maps.googleapis.com/maps/api/geocode/json?address="+e+"&key="+r}).then(function(o){console.log("LocationService.geocode response",o),t(o)})["catch"](function(o){$log.error("LocationService.geocode error:",o)})})},e.prototype.revGeocode=function(o){var e={};return e.lat=o.latitude,e.lng=o.longitude,new Promise(function(o,n){t.geocode({location:e},function(e,t){"OK"===t?o(e[0]):n(console.log("geocoding error: ",t))})})},e.prototype.decodePolyline=function(o,e){return new Promise(function(t,n){for(var r,i,c=0,a=0,u=0,s=[],l=0,g=0,p=null,d=Math.pow(10,e||6);c<o.length;){p=null,l=0,g=0;do p=o.charCodeAt(c++)-63,g|=(31&p)<<l,l+=5;while(p>=32);r=1&g?~(g>>1):g>>1,l=g=0;do p=o.charCodeAt(c++)-63,g|=(31&p)<<l,l+=5;while(p>=32);i=1&g?~(g>>1):g>>1,a+=r,u+=i,s.push([a/d,u/d])}t(s)})},e}]);